<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
         function uploadImage() {
            const imageInput = document.getElementById('imageInput');
            
            if (imageInput.files.length === 0) {
                alert('Please select an image file.');
                return;
            }

            const file = imageInput.files[0];
            const extension = file.name.split('.').pop(); // Get the file extension
            const randomString = generateRandomString(8);

            const newFileName = randomString + '.' + extension;
            const destinationFolder = 'your/destination/folder/'; // Replace with the actual folder path
            
            // Save the file to the folder with the random string as the name
            saveFileToFolder(file, destinationFolder, newFileName);

            const reader = new FileReader();
            reader.onload = function(event) {
                const dataURL = event.target.result;

                // Save the data URL in local storage with the random string as the key
                localStorage.setItem(randomString, dataURL);

                alert('Image uploaded and saved as ' + newFileName);
            };

            reader.readAsDataURL(file);
        }

        // Function to generate a random string of a specified length
        function generateRandomString(length) {
            const characters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * characters.length);
                result += characters.charAt(randomIndex);
            }
            return result;
        }

        // Function to save the file to a folder on the client-side
        function saveFileToFolder(file, folder, filename) {
            const blob = new Blob([file], { type: file.type });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.style.display = 'none';
            document.body.appendChild(a);
            a.click();

            // Clean up the URL.createObjectURL
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>