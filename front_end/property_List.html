<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Property List</title>
        <!-- bootstrap css -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
    </head>
    <body>
        <div class="container my-4">
            <h4 class="text-center my-5">Find Your Ideal Hotel Booking</h4>
            <div class="row"></div>
        </div>
        <!--Bootstrap jquery and js  -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>

        <script>
      let propertyArray = JSON.parse(localStorage.getItem("propertyData"));
      let html = "";
      propertyArray.forEach((currentObj, index) => {
        // Split PropertyDescription into an array of words
        const words = currentObj.PropertyDescription.split(" ");

        // Limit the description to 20 words
        const limitedDescription = words.slice(0, 15).join(" ");

        // Add ellipses if the description is longer than 20 words
        const descriptionText =
          words.length > 15 ? limitedDescription + "..." : limitedDescription;

        html =
          html +
          `<div class="col-md-4 mb-3">
            <div class="card" style="width: 18rem;">
  <img class="card-img-top" src="../admin/public/storage/property_images/${propertyArray[index].PropertyImages[0].filename}" alt="Card image cap">
  <div class="card-body">
    <h5 class="card-title">${currentObj.propertyTitle}</h5>
    <small class="card-text">${descriptionText}</br></br>
  <b>Price</b> <b class="text-danger">$${currentObj.pricingPlan}</b> </br>
  <b>Location</b>  <b class="text-success">${currentObj.propertyLocation}</b></br></br>
    </small>
    <a href="../admin/reservations/reservation_form.html?reservationId=${index}" class="btn btn-primary form-control">Book</a>
  </div>
</div>
            
</div>`;
      });
      document.querySelector(".row").innerHTML = html;
        </script>
    </body>
</html>
